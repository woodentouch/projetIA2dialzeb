<!-- Header with Fond 2 and Overlay -->
<header class="page-header">
  <div class="header-content">
    <h1>L'élégance de la précision : La mathématique au service de la certitude.</h1>
  </div>
</header>

<!-- Main Workspace (Solid off-white column) -->
<main class="main-content">

  <div class="intro-text">
    <p>Définissez les caractéristiques de votre bien pour générer un intervalle de confiance.</p>
  </div>

  <div class="simulator-controls">
    <!-- Formulaire dynamique pour les caractéristiques -->
    <mat-accordion>
      <mat-expansion-panel *ngFor="let group of featureGroups">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{ group.name }}
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="form-container">
          <div *ngFor="let feature of group.features" class="form-field-wrapper">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>{{ feature }}</mat-label>
              <input matInput 
                     [type]="isNumeric(feature) ? 'number' : 'text'" 
                     [(ngModel)]="formData[feature]"
                     [name]="feature">
            </mat-form-field>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>

    <!-- Confidence Slider -->
    <div class="slider-container">
      <label class="slider-label">Ajustez le curseur pour définir le niveau de rigueur statistique ({{confidence}}%).</label>
      <mat-slider min="80" max="99" step="1" discrete="true">
        <input matSliderThumb [(ngModel)]="confidence">
      </mat-slider>
    </div>

    <!-- Bouton de soumission -->
    <div class="submit-container">
      <button mat-raised-button class="submit-button" (click)="onSubmit()" [disabled]="isLoading">
        <span *ngIf="!isLoading">Estimer l'intervalle</span>
        <mat-spinner *ngIf="isLoading" diameter="24"></mat-spinner>
      </button>
    </div>
  </div>

  <!-- Results -->
  <div class="results-container" [class.fading]="isFading">
    <div *ngIf="lowerBound !== null && upperBound !== null && !isLoading">
      <p class="result-label">Voici votre zone de prédiction sécurisée.</p>
      <p class="interval-text">{{ lowerBound | number:'1.0-0' }}€ &mdash; {{ upperBound | number:'1.0-0' }}€</p>
    </div>
    <div *ngIf="predictionError" class="error-message">
      <p>{{ predictionError }}</p>
    </div>
  </div>

</main>
